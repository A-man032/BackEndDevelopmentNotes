# HTTP

Web使用HTTP（HyperText Transfer Protocol，超文本传输协议）作为规范，完成从客户端多服务端等一系列运作流程。

Web是建立在HTTP协议上通信的。

URL：Uniform Resource Locator，统一资源定位符。

HTTP是基于TCP/IP协议族。

## TCP/IP协议族

TCP/IP协议族是分层的，按层次分为4层：应用层、传输层、网络层、数据链路层。

分层的好处：便于修改和替换某层使用的协议；分层之后各层的任务相对简单，无需考虑其它层是如何实现的。

**应用层**：向用户提供了应用服务时通信的活动，FTP、DNS、HTTP。

**传输层**：提供处于网络连接中的两台计算机之间的数据传输。TCP、UDP。

**网络层**：处理网络上流动的数据包，数据包是网络传输的最小数据单位。该层规定了通过怎样的路径到达对方计算机，并把数据包传送给对方。IP。

**链路层**：处理连接网络的硬件部分。

使用TCP/IP协议族进行网络通信时，会通过分层顺序和对方进行通信。发送端从应用层往下走，接收端则从链路层往上走。

> 首先作为发送端的客户端在应用层 (HTTP 协议)发出一个想看某个 Web 页面的 HTTP 请求。
>
> 接着，为了传输方便，在传输层(TCP 协议)把从应用层处收到的数 据(HTTP 请求报文)进行分割，并在各个报文上打上标记序号及端 口号后转发给网络层。
>
> 在网络层(IP 协议)，增加作为通信目的地的 MAC 地址后转发给链 路层。这样一来，发往网络的通信请求就准备齐全了。
>
> 接收端的服务器在链路层接收到数据，按序往上层发送，一直到应用 层。当传输到应用层，才能算真正接收到由客户端发送过来的 HTTP 请求。

![image-20210319103232234](./png/TCP分层模型.png)

### IP、TCP、DNS

**IP协议**

IP协议是把各种数据包传送给对方。保证确实传送到对方那里，两个重要的条件是**IP地址和MAC地址**。

- IP地址指明节点被分配到的地址
- MAC地址是指网卡所属的固定地址
- IP地址可以和MAC地址配对，IP地址可变，MAC地址基本不会改变。

**ARP协议凭借MAC地址进行通信。**IP间通信依赖MAC地址。在网络上，通信的双方在同一局域网 (LAN)内的情况是很少的，通常是经过多台计算机和网络设备中转 才能连接到对方。而在进行中转时，会利用下一站中转设备的 MAC 地址来搜索下一个中转目标。这时，会采用 ARP 协议(Address Resolution Protocol)。**ARP 是一种用以解析地址的协议，根据通信方 的 IP 地址就可以反查出对应的 MAC 地址。**这种机制叫**路由选择**。

**TCP协议**

TCP 位于传输层，提供可靠的字节流服务。字节流服务(Byte Stream Service)是指，为了方便传输，将大块数据分割成以报文段(segment)为单位的数据包进行管理。而可靠的传输服务是指，能够把数据准确可靠地传给对方。

TCP协议为了更容易传送大数据才把数据分割，且TCP协议能够确认数据最终是否送达到对方。

**TCP协议采用三次握手保证可靠传输，握手过程中使用了TCP的标记——SYN（synchronize）和ACK（acknowledgement）。**

发送端首先发送一个带 SYN 标志的数据包给对方。接收端收到后， 回传一个带有 SYN/ACK 标志的数据包以示传达确认信息。最后，发 送端再回传一个带 ACK 标志的数据包，代表“握手”结束。

![image-20210319111956390](./png/三次握手.png)

**DNS服务**

提供域名到IP地址之间的解析服务。计算机被赋予IP地址、主机名、域名。

用户通常使用主机名或域名来访问对方的计算机，而不是直接通过IP地址访问。

**DNS协议提供通过域名查找IP地址，或逆向从IP地址反查域名的服务。**

**输入一个URL，解析和传输的过程：**

![image-20210319112909041](./png/url解析传输过程.png)



